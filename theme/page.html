<html>
    <header>
        <title>${site.title} - ${page.title}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="public/style.css">

         <!-- jQuery -->
         <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" type="text/javascript"></script>
          
         <!-- nanogallery2 -->
         <link  href="https://cdn.jsdelivr.net/npm/nanogallery2@3/dist/css/nanogallery2.min.css" rel="stylesheet" type="text/css">
         <script  type="text/javascript" src="https://cdn.jsdelivr.net/npm/nanogallery2@3/dist/jquery.nanogallery2.min.js"></script>
    </header>
    <body>
        <div id="site">
            <div id="header">
                <h1>${site.title}</h1>
                <p>${site.description}</p>
            </div>
            <div id="center">
                <div id="menu">
                    <ul>
                        <li tal:repeat="p site.pages"><a href="${p.url}">${p.menu}</a></li>
                    </ul>
                </div>
                <div id="page">
                    <h1>${page.title}</h1>
                    <div id="content" tal:content="structure page.content">
                    </div>
                    <div id="gallery">
                        <a tal:repeat="img page.images" href="${img.path}" data-ngThumb = "${img.thumb}">A</a>
                    </div>
                </div>
            </div>
            <div id="footer">
                <p>${site.author} ${site.year} - created using <a href="https://github.com/CrociDB/flingern">flingern</a></p>
            </div>
        </div>

        <script type="text/javascript">
            (function(){
                $("#gallery").nanogallery2({
                    // GALLERY AND THUMBNAIL LAYOUT
                    thumbnailHeight: '256', thumbnailWidth: 'auto',
                    gallerySorting: 'random',
                    thumbnailAlignment: 'fillWidth',
                    thumbnailL1GutterWidth: 10,
                    thumbnailL1GutterHeight: 10,
                    thumbnailL1BorderHorizontal: 0,
                    thumbnailL1BorderVertical: 0,

                    // THUMBNAIL TOOLS & LABEL
                    thumbnailL1Label: { display: false },

                    // DISPLAY ANIMATION
                    thumbnailDisplayTransition: 'flipUp',       // thumbnail display animation
                    thumbnailDisplayTransitionDuration: 400,
                    thumbnailDisplayInterval: 200,
                    thumbnailDisplayOrder: 'rowByRow',

                    // THUMBNAIL'S HOVER ANIMATION
                    thumbnailHoverEffect2: 'toolsSlideUp|labelSlideDown',
                    touchAnimation: false,
                    touchAutoOpenDelay: -1,

                    // LIGHTBOX
                    imageTransition: 'swipe',
                    viewerGallery: "bottom",
                    viewerImageDisplay: "",
                    viewerTheme: {
                        barBackground:          '#FFFFFF',
                        barBorder:              '0px solid #111',
                        barColor:               '#FFFFFF',
                        barDescriptionColor:    '#FFF',
                        background:             '#FFFFFF',
                    },

                    viewerTools: {
                        topLeft: "pageCounter",
                        topRight: "zoomButton, fullscreenButton, closeButton"
                    },

                    // DEEP LINKING
                    locationHash: false
                    });

                    if (!window.matchMedia("only screen and (max-width: 760px)").matches)
                    {
                        $("#page").height($("#center")[0].clientHeight);
                    }
                })();
        </script>
    </body>
</html>
